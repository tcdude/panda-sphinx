

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Performance Issue: Too Many Shader Instructions &mdash; Panda3D Manual</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Panda3D Manual" href="../index.html"/>
        <link rel="up" title="Performance Tuning" href="index.html"/>
        <link rel="next" title="Performance Issue: Excessive Fill" href="excessive-fill.html"/>
        <link rel="prev" title="Performance Issue: Too Many Text Updates" href="too-many-text-updates.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Panda3D
          

          
          </a>

          
            
            
              <div class="version">
                1.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Introduction to Panda3D</a></li>
<li class="toctree-l1"><a class="reference internal" href="../programming-with-panda3d/index.html">Programming with Panda3D</a></li>
<li class="toctree-l1"><a class="reference internal" href="../distribution/index.html">Distributing Panda3D Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../samples/index.html">Sample Programs in the Distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debugging/index.html">Debugging</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Performance Tuning</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="basic-performance-diagnostics.html">Basic Performance Diagnostics</a></li>
<li class="toctree-l2"><a class="reference internal" href="measuring-performance-with-pstats.html">Measuring Performance with PStats</a></li>
<li class="toctree-l2"><a class="reference internal" href="the-rigid-body-combiner.html">The Rigid Body Combiner</a></li>
<li class="toctree-l2"><a class="reference internal" href="too-many-meshes.html">Performance Issue: Too Many Meshes</a></li>
<li class="toctree-l2"><a class="reference internal" href="too-many-state-changes.html">Performance Issue: Too Many State Changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="too-many-text-updates.html">Performance Issue: Too Many Text Updates</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Performance Issue: Too Many Shader Instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="excessive-fill.html">Performance Issue: Excessive Fill</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory-full.html">Performance Issue: Memory Full</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-calculation.html">Performance Issue: Python Calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="failure-to-garbage-collect.html">Performance Issue: Failure to Garbage Collect</a></li>
<li class="toctree-l2"><a class="reference internal" href="collision-system-misuse.html">Performance Issue: Collision System Misuse</a></li>
<li class="toctree-l2"><a class="reference internal" href="motherboard-integrated-video.html">Performance Issue: Motherboard Integrated Video</a></li>
<li class="toctree-l2"><a class="reference internal" href="too-many-polygons.html">Performance Issue: Too Many Polygons</a></li>
<li class="toctree-l2"><a class="reference internal" href="miscellaneous.html">Performance Issue: Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../using-c++/index.html">Using C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Panda3D Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building-from-source.html">Building Panda3D from Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cheat-sheets.html">Cheat Sheets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started-on-osx.html">Getting Started on OSX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../more-panda3d-resources.html">More Panda3D Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thirdparty-licenses.html">Third-party dependencies and license info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../the-irc-channel.html">The IRC Channel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Panda3D</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Performance Tuning</a> &raquo;</li>
      
    <li>Performance Issue: Too Many Shader Instructions</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/performance-tuning/too-many-shader-instructions.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="performance-issue-too-many-shader-instructions">
<span id="too-many-shader-instructions"></span><h1>Performance Issue: Too Many Shader Instructions<a class="headerlink" href="#performance-issue-too-many-shader-instructions" title="Permalink to this headline">¶</a></h1>
<p>This only can happen if you have at least one
<code class="docutils literal"><span class="pre">NodePath.setShader</span></code> or
<code class="docutils literal"><span class="pre">NodePath.setShaderAuto</span></code> method call in your
application, or you are using a post processing filter from CommonManager.</p>
<div class="section" id="too-many-vertex-shader-instructions">
<h2>Too Many Vertex Shader Instructions<a class="headerlink" href="#too-many-vertex-shader-instructions" title="Permalink to this headline">¶</a></h2>
<p>Try so simplify your scene. Objects that are far away don&#8217;t need millions of
vertices. Look at LODNode and FadeLODNode.</p>
</div>
<div class="section" id="too-many-fragment-pixel-shader-instructions">
<h2>Too Many Fragment/Pixel Shader Instructions<a class="headerlink" href="#too-many-fragment-pixel-shader-instructions" title="Permalink to this headline">¶</a></h2>
<p>An easy way to detect whether this is a bottleneck in your application, try
resizing the window. If the framerate heavily varies with the window size or
screen resolution, you&#8217;re most likely dealing with this problem.</p>
<p>If your frame rate strong depends on the window or screen resolution, this may
be one hint that your fragment shader has too many instructions. Another
problem is if your depth complexity is too high. Try to look at your scene
from different angles and positions. If your frame rate varies then the
overdraw from one specific view angle is to high.</p>
<p>Try to minimize the objects Panda3D needs to draw. Use
<code class="docutils literal"><span class="pre">lens.setFar</span></code>, or fallback to a
simpler fragment shaders for objects that are far away. If an object is far
away from the viewer it doesn&#8217;t make sense to apply normal mapping. LODNode
and FadeLODNode may help.</p>
<p>If your fragment shader is self made, then try to offload some work to your
vertex shader.</p>
<p>There is a simple method to test your scene. Replace your whole fragment
shader with the following snippet:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">o_color</span> <span class="o">=</span> <span class="n">float4</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">);</span>
</pre></div>
</div>
<p>If the frame rate doesn&#8217;t change, then it is the depth complexity. It if
changes it may be the depth complexity or the shader.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="excessive-fill.html" class="btn btn-neutral float-right" title="Performance Issue: Excessive Fill" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="too-many-text-updates.html" class="btn btn-neutral" title="Performance Issue: Too Many Text Updates" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Panda3D.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.10.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>