

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Performance Issue: Python Calculation &mdash; Panda3D Manual</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Panda3D Manual" href="../index.html"/>
        <link rel="up" title="Performance Tuning" href="index.html"/>
        <link rel="next" title="Performance Issue: Failure to Garbage Collect" href="failure-to-garbage-collect.html"/>
        <link rel="prev" title="Performance Issue: Memory Full" href="memory-full.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Panda3D
          

          
          </a>

          
            
            
              <div class="version">
                1.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Introduction to Panda3D</a></li>
<li class="toctree-l1"><a class="reference internal" href="../programming-with-panda3d/index.html">Programming with Panda3D</a></li>
<li class="toctree-l1"><a class="reference internal" href="../distribution/index.html">Distributing Panda3D Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../samples/index.html">Sample Programs in the Distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debugging/index.html">Debugging</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Performance Tuning</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="basic-performance-diagnostics.html">Basic Performance Diagnostics</a></li>
<li class="toctree-l2"><a class="reference internal" href="measuring-performance-with-pstats.html">Measuring Performance with PStats</a></li>
<li class="toctree-l2"><a class="reference internal" href="the-rigid-body-combiner.html">The Rigid Body Combiner</a></li>
<li class="toctree-l2"><a class="reference internal" href="too-many-meshes.html">Performance Issue: Too Many Meshes</a></li>
<li class="toctree-l2"><a class="reference internal" href="too-many-state-changes.html">Performance Issue: Too Many State Changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="too-many-text-updates.html">Performance Issue: Too Many Text Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="too-many-shader-instructions.html">Performance Issue: Too Many Shader Instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="excessive-fill.html">Performance Issue: Excessive Fill</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory-full.html">Performance Issue: Memory Full</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Performance Issue: Python Calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="failure-to-garbage-collect.html">Performance Issue: Failure to Garbage Collect</a></li>
<li class="toctree-l2"><a class="reference internal" href="collision-system-misuse.html">Performance Issue: Collision System Misuse</a></li>
<li class="toctree-l2"><a class="reference internal" href="motherboard-integrated-video.html">Performance Issue: Motherboard Integrated Video</a></li>
<li class="toctree-l2"><a class="reference internal" href="too-many-polygons.html">Performance Issue: Too Many Polygons</a></li>
<li class="toctree-l2"><a class="reference internal" href="miscellaneous.html">Performance Issue: Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../using-c++/index.html">Using C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Panda3D Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building-from-source.html">Building Panda3D from Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cheat-sheets.html">Cheat Sheets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started-on-osx.html">Getting Started on OSX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../more-panda3d-resources.html">More Panda3D Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thirdparty-licenses.html">Third-party dependencies and license info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../the-irc-channel.html">The IRC Channel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Panda3D</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Performance Tuning</a> &raquo;</li>
      
    <li>Performance Issue: Python Calculation</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/performance-tuning/python-calculation.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="performance-issue-python-calculation">
<span id="python-calculation"></span><h1>Performance Issue: Python Calculation<a class="headerlink" href="#performance-issue-python-calculation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>Performance Issue: Python Calculation<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>The Panda3D engine is mostly written in C++, not Python. It would be false to
assume that Panda3D is always slower than other game engines when used with
Python. When you call a function in Python, Python calls the C++ equivalent,
same for classes. For example, when you load a model, Panda3D&#8217;s C++ side does
all the job of reading from the 3d file, creating the vertices, faces,
applying the materials, textures and so on. The Python overhead is usually
very small. Many other games and game engines use scripting languages for
writing the game logic code, because usually the difference in performance
time is negligible and scripting languages clearly win when it comes to
development time.</p>
<p>However there are certain situations when you need to do some heavy
calculations yourself and Python can be up to 100x slower than C++. This does
not mean you need to abandon Python and rewrite all your code in C++ for that
single bottleneck. Only that single function or class can be ported to C++ and
called from your Python code.</p>
<p>You might be able to get away with not using C++ at all though.</p>
<ul class="simple">
<li>See if you can optimize your code. The Python website has a
<a class="reference external" href="http://wiki.python.org/moin/PythonSpeed/PerformanceTips">page</a> for
various performance tips. Very often performance can be improved by simply
writing better Python code.</li>
<li>There are many Python libraries which can improve performance for certain
tasks, like <a class="reference external" href="http://numpy.scipy.org/">Numpy</a>.</li>
<li>The <a class="reference external" href="http://cython.org/">Cython</a> language is also an option. Read
<a class="reference external" href="https://www.panda3d.org/blog/?p=173">this</a> blog entry to find out more
about Cython and how it can be used with Panda3D.</li>
</ul>
<p>If none of these options help you, you will have to write a C++ version of the
bottleneck function or class and make it accessible from your Python code.
<a class="reference external" href="http://wiki.python.org/moin/IntegratingPythonWithOtherLanguages#C.2BAC8-C.2B-.2B-">This</a>
page from the Python website shows you the many options you have.</p>
<p>Note that unlike Python modules, C++ modules are not cross-platform and might
not run on another OS or platform. This is why it&#8217;s a good idea to save this
option for last. You will have to have one compiled module for every platform
your game is meant to run on. You can do something like this if you want to be
really sure that your game will run on any platform out-of-the-box:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">cVersionOfModule</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">pythonVersionOfModule</span>
</pre></div>
</div>
<p>Then the game will use the Python version of the module if the C++ version
will fail to load. Your game will use the slow Python version in that case,
but at least it won&#8217;t crash.</p>
<p>Note: unlike modifying Panda3D&#8217;s source, compiling a C++ module doesn&#8217;t
require you to recompile the whole engine.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="failure-to-garbage-collect.html" class="btn btn-neutral float-right" title="Performance Issue: Failure to Garbage Collect" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="memory-full.html" class="btn btn-neutral" title="Performance Issue: Memory Full" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Panda3D.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.10.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>