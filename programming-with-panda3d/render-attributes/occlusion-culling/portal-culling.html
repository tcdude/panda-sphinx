

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Portal Culling &mdash; Panda3D Manual</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Panda3D Manual" href="../../../index.html"/>
        <link rel="up" title="Occlusion Culling" href="index.html"/>
        <link rel="next" title="Light Ramps" href="../light-ramps.html"/>
        <link rel="prev" title="Polygon Occluder Culling" href="polygon-occluder-culling.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Panda3D
          

          
          </a>

          
            
            
              <div class="version">
                1.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../intro/index.html">Introduction to Panda3D</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Programming with Panda3D</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../the-scene-graph/index.html">The Scene Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../the-configuration-file/index.html">The Configuration File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../models-and-actors/index.html">Models and Actors</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Render Attributes</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../list-of-all-attributes.html">List of All Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lighting.html">Lighting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../materials.html">Materials</a></li>
<li class="toctree-l3"><a class="reference internal" href="../depth-test-and-depth-write.html">Depth Test and Depth Write</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fog.html">Fog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha-testing.html">Alpha Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../color-write-masks.html">Color Write Masks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../antialiasing.html">Antialiasing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../clip-planes.html">Clip Planes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tinting-and-recoloring.html">Tinting and Recoloring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../backface-culling-and-frontface-culling.html">Backface Culling and Frontface Culling</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Occlusion Culling</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="polygon-occluder-culling.html">Polygon Occluder Culling</a></li>
<li class="toctree-l4"><a class="reference internal" href="polygon-occluder-culling.html#polygon-occluders">Polygon Occluders</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Portal Culling</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">Portal Culling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../light-ramps.html">Light Ramps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auxiliary-bitplane-control.html">Auxiliary Bitplane Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stencil-attribute.html">Stencil Test/Write Attribute</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../texturing/index.html">Texturing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shaders/index.html">Shaders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../camera-control/index.html">Camera Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sound/index.html">Sound</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intervals/index.html">Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tasks-and-event-handling/index.html">Tasks and Event Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../text-and-image-rendering/index.html">Text and Image Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../directgui/index.html">DirectGUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../render-effects/index.html">Render Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../finite-state-machines/index.html">Finite State Machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terrain/index.html">Terrain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../internal-structures/index.html">Advanced operations with Panda3D&#8217;s internal structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../render-to-texture-and-image-postprocessing/index.html">Render-to-Texture and Image Postprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panda3d-rendering-process/index.html">Panda3D Rendering Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panda3d-utility-functions.html">Panda3D Utility Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../particle-effects/index.html">Particle Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../collision-detection/index.html">Collision Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../garbage-collection/index.html">Garbage Collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware-support/index.html">Hardware support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../math-engine/index.html">Math Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../physics/index.html">Physics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../motion-paths.html">Motion Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../timing/index.html">Timing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../networking/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../multifiles/index.html">Multifiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../showbase.html">ShowBase</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../file-reading.html">File Reading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../threading.html">Threading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subclassing.html">Subclassing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../table-of-features-supported-per-graphic-renderer.html">Table of features supported per graphic renderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pandai/index.html">Artificial Intelligence (PANDAI)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../distribution/index.html">Distributing Panda3D Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples/index.html">Sample Programs in the Distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../debugging/index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../performance-tuning/index.html">Performance Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../using-c++/index.html">Using C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/index.html">Panda3D Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../building-from-source.html">Building Panda3D from Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cheat-sheets.html">Cheat Sheets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting-started-on-osx.html">Getting Started on OSX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../more-panda3d-resources.html">More Panda3D Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../thirdparty-licenses.html">Third-party dependencies and license info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../the-irc-channel.html">The IRC Channel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Panda3D</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Programming with Panda3D</a> &raquo;</li>
      
          <li><a href="../index.html">Render Attributes</a> &raquo;</li>
      
          <li><a href="index.html">Occlusion Culling</a> &raquo;</li>
      
    <li>Portal Culling</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/programming-with-panda3d/render-attributes/occlusion-culling/portal-culling.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="portal-culling">
<span id="id1"></span><h1>Portal Culling<a class="headerlink" href="#portal-culling" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="id2">
<h1>Portal Culling<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-portal-culling">
<h2>What is Portal Culling?<a class="headerlink" href="#what-is-portal-culling" title="Permalink to this headline">¶</a></h2>
<p>Portal culling is a method by which the 3D scene can be broken into areas
called cells, which are linked together by portals. A portal is a window in 3D
space that allows objects in one cell (the &#8220;out&#8221; cell) to be seen from another
cell (the &#8220;in&#8221; cell). Portal culling works best in scenes where there is
limited visibility from one area to another, for example a building or network
of caves. It has very limited use in wide open scenes.</p>
<p><a href="#id3"><span class="problematic" id="id4">|portal\_diagram.png|</span></a></p>
<p>In this diagram the original camera frustum is seen in blue, this is used to
cull the current cell. The shaded areas represent areas visible after culling.
The camera is looking through a portal into the next cell, and so the frustum
is reduced (seen in cyan) so as to render only that which is visible through
the portal. This reduced frustum is then used to check visibility of
additional portals in other cells, and it will be reduced again as it passed
through more portals (seen in red and green). Note that even though more cells
are visible to the original camera frustum, there is no direct line of
visibility and so they are not even considered.</p>
</div>
<div class="section" id="how-are-cells-and-portals-handled-in-panda3d">
<h2>How are Cells and Portals handled in Panda3D?<a class="headerlink" href="#how-are-cells-and-portals-handled-in-panda3d" title="Permalink to this headline">¶</a></h2>
<p>Cells in Panda3D are just NodePaths parented under the top level of the scene
graph (usually render). Any object that is physically in that cell should be
parented under the cell&#8217;s NodePath. It is up to you to dynamically re-parent
objects as they move from one cell to another, or not put them in a cell at
all.</p>
<p>Portals are one-way and for this reason they are usually created in pairs.
Portals get parented under the cell from which they are intended to be looked
through. For example if this is a portal from cell A looking into cell B, it
would get parented under cell A. Which side of the portal is the front or back
is determined by winding order of the vertices, the same as with render
geometry.</p>
<p>Application-level code is needed to show the cell the camera is currently in
and hide the rest. During the culling stage any portal visible to the camera
will be enabled, and render the objects that can be seen through the portal
into its specified &#8220;out&#8221; cell. If another portal is visible through the
previous one, the process continues. If multiple cameras are used, for example
to do split screen play, hide the cells using the same mask set on the camera
using camera.setCameraMask(mask).</p>
</div>
<div class="section" id="incomplete-section">
<h2>Incomplete Section<a class="headerlink" href="#incomplete-section" title="Permalink to this headline">¶</a></h2>
<p>Note: this section is incomplete. It will be updated soon.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../light-ramps.html" class="btn btn-neutral float-right" title="Light Ramps" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="polygon-occluder-culling.html" class="btn btn-neutral" title="Polygon Occluder Culling" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Panda3D.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.10.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>