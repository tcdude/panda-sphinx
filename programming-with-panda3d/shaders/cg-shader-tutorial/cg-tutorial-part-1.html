

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Cg Tutorial Part 1 &mdash; Panda3D Manual</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Panda3D Manual" href="../../../index.html"/>
        <link rel="up" title="Cg Shader Tutorial" href="index.html"/>
        <link rel="next" title="Cg Tutorial Part 2" href="cg-tutorial-part-2.html"/>
        <link rel="prev" title="Cg Shader Tutorial" href="index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Panda3D
          

          
          </a>

          
            
            
              <div class="version">
                1.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../intro/index.html">Introduction to Panda3D</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Programming with Panda3D</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../the-scene-graph/index.html">The Scene Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../the-configuration-file/index.html">The Configuration File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../models-and-actors/index.html">Models and Actors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../render-attributes/index.html">Render Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../texturing/index.html">Texturing</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Shaders</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../shader-basics.html">Shader Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../list-of-possible-cg-shader-inputs.html">List of Possible Cg Shader Inputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../list-of-glsl-shader-inputs.html">List of GLSL Shader Inputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shaders-and-coordinate-spaces.html">Shaders and Coordinate Spaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../known-shader-issues.html">Known Shader Bugs and Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../the-shader-generator.html">The Shader Generator</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Cg Shader Tutorial</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Cg Tutorial Part 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="cg-tutorial-part-2.html">Cg Tutorial Part 2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../compute-shaders.html">Compute Shaders</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../camera-control/index.html">Camera Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sound/index.html">Sound</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intervals/index.html">Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tasks-and-event-handling/index.html">Tasks and Event Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../text-and-image-rendering/index.html">Text and Image Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../directgui/index.html">DirectGUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../render-effects/index.html">Render Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../finite-state-machines/index.html">Finite State Machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terrain/index.html">Terrain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../internal-structures/index.html">Advanced operations with Panda3D&#8217;s internal structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../render-to-texture-and-image-postprocessing/index.html">Render-to-Texture and Image Postprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panda3d-rendering-process/index.html">Panda3D Rendering Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panda3d-utility-functions.html">Panda3D Utility Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../particle-effects/index.html">Particle Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../collision-detection/index.html">Collision Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../garbage-collection/index.html">Garbage Collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware-support/index.html">Hardware support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../math-engine/index.html">Math Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../physics/index.html">Physics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../motion-paths.html">Motion Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../timing/index.html">Timing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../networking/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../multifiles/index.html">Multifiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../showbase.html">ShowBase</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../file-reading.html">File Reading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../threading.html">Threading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subclassing.html">Subclassing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../table-of-features-supported-per-graphic-renderer.html">Table of features supported per graphic renderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pandai/index.html">Artificial Intelligence (PANDAI)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../distribution/index.html">Distributing Panda3D Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples/index.html">Sample Programs in the Distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../debugging/index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../performance-tuning/index.html">Performance Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../using-c++/index.html">Using C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/index.html">Panda3D Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../building-from-source.html">Building Panda3D from Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cheat-sheets.html">Cheat Sheets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting-started-on-osx.html">Getting Started on OSX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../more-panda3d-resources.html">More Panda3D Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../thirdparty-licenses.html">Third-party dependencies and license info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../the-irc-channel.html">The IRC Channel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Panda3D</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Programming with Panda3D</a> &raquo;</li>
      
          <li><a href="../index.html">Shaders</a> &raquo;</li>
      
          <li><a href="index.html">Cg Shader Tutorial</a> &raquo;</li>
      
    <li>Cg Tutorial Part 1</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/programming-with-panda3d/shaders/cg-shader-tutorial/cg-tutorial-part-1.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cg-tutorial-part-1">
<span id="id1"></span><h1>Cg Tutorial Part 1<a class="headerlink" href="#cg-tutorial-part-1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="cg-tutorial-part-1-the-baseline-panda-app">
<h2>Cg Tutorial Part 1: The Baseline Panda App<a class="headerlink" href="#cg-tutorial-part-1-the-baseline-panda-app" title="Permalink to this headline">¶</a></h2>
<p>We&#8217;ll start by setting up the tutorial project folder. Create a new folder for
the tutorial and download the <a class="reference external" href="http://code.google.com/p/p3dst/source/browse/trunk">tutorial
media</a> then put the
files in the new folder. The zip file contains all the models and textures you
will need to follow this tutorial series.</p>
<p>For this first lesson we&#8217;ll just create a basic Panda python script. We will
be modifying this python script as we continue the other lessons. Copy the
script below and save it to the folder.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Lesson1.py</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">import</span> <span class="nn">direct.directbase.DirectStart</span>
<span class="kn">from</span> <span class="nn">direct.interval.LerpInterval</span> <span class="kn">import</span> <span class="n">LerpFunc</span>
<span class="kn">from</span> <span class="nn">panda3d.core</span> <span class="kn">import</span> <span class="n">Texture</span><span class="p">,</span> <span class="n">TextureStage</span>

<span class="n">base</span><span class="o">.</span><span class="n">setBackgroundColor</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<span class="n">base</span><span class="o">.</span><span class="n">disableMouse</span><span class="p">()</span>

<span class="n">base</span><span class="o">.</span><span class="n">camLens</span><span class="o">.</span><span class="n">setNearFar</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">)</span>
<span class="n">base</span><span class="o">.</span><span class="n">camLens</span><span class="o">.</span><span class="n">setFov</span><span class="p">(</span><span class="mf">45.0</span><span class="p">)</span>

<span class="n">camera</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">20.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">)</span>
<span class="n">camera</span><span class="o">.</span><span class="n">lookAt</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">render</span><span class="o">.</span><span class="n">attachNewNode</span><span class="p">(</span><span class="s2">&quot;Root&quot;</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

<span class="n">textureArrow</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">loadTexture</span><span class="p">(</span><span class="s2">&quot;arrow.png&quot;</span><span class="p">)</span>
<span class="n">textureArrow</span><span class="o">.</span><span class="n">setWrapU</span><span class="p">(</span><span class="n">Texture</span><span class="o">.</span><span class="n">WMClamp</span><span class="p">)</span>
<span class="n">textureArrow</span><span class="o">.</span><span class="n">setWrapV</span><span class="p">(</span><span class="n">Texture</span><span class="o">.</span><span class="n">WMClamp</span><span class="p">)</span>

<span class="n">stageArrow</span> <span class="o">=</span> <span class="n">TextureStage</span><span class="p">(</span><span class="s2">&quot;Arrow&quot;</span><span class="p">)</span>
<span class="n">stageArrow</span><span class="o">.</span><span class="n">setSort</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">textureCircle</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">loadTexture</span><span class="p">(</span><span class="s2">&quot;circle.png&quot;</span><span class="p">)</span>
<span class="n">textureCircle</span><span class="o">.</span><span class="n">setWrapU</span><span class="p">(</span><span class="n">Texture</span><span class="o">.</span><span class="n">WMClamp</span><span class="p">)</span>
<span class="n">textureCircle</span><span class="o">.</span><span class="n">setWrapV</span><span class="p">(</span><span class="n">Texture</span><span class="o">.</span><span class="n">WMClamp</span><span class="p">)</span>

<span class="n">stageCircle</span> <span class="o">=</span> <span class="n">TextureStage</span><span class="p">(</span><span class="s2">&quot;Circle&quot;</span><span class="p">)</span>
<span class="n">stageCircle</span><span class="o">.</span><span class="n">setSort</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="n">modelCube</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">loadModel</span><span class="p">(</span><span class="s2">&quot;cube.egg&quot;</span><span class="p">)</span>

<span class="n">cubes</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]:</span>
    <span class="n">cube</span> <span class="o">=</span> <span class="n">modelCube</span><span class="o">.</span><span class="n">copyTo</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
    <span class="n">cube</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
    <span class="n">cubes</span> <span class="o">+=</span> <span class="p">[</span> <span class="n">cube</span> <span class="p">]</span>

<span class="n">base</span><span class="o">.</span><span class="n">accept</span><span class="p">(</span><span class="s2">&quot;escape&quot;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">)</span>

<span class="n">base</span><span class="o">.</span><span class="n">accept</span><span class="p">(</span><span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="n">base</span><span class="o">.</span><span class="n">oobe</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">animate</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cubes</span><span class="p">)):</span>
        <span class="n">cubes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">setH</span><span class="p">(</span><span class="n">t</span> <span class="o">*</span> <span class="p">(</span><span class="mf">2.0</span> <span class="o">**</span> <span class="n">i</span><span class="p">))</span>

<span class="n">interval</span> <span class="o">=</span> <span class="n">LerpFunc</span><span class="p">(</span><span class="n">animate</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">360.0</span><span class="p">)</span>

<span class="n">base</span><span class="o">.</span><span class="n">accept</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
    <span class="n">root</span><span class="o">.</span><span class="n">setX</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">getX</span><span class="p">()</span> <span class="o">+</span> <span class="n">x</span><span class="p">)</span>
    <span class="n">root</span><span class="o">.</span><span class="n">setY</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">getY</span><span class="p">()</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">root</span><span class="o">.</span><span class="n">setZ</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">getZ</span><span class="p">()</span> <span class="o">+</span> <span class="n">z</span><span class="p">)</span>

<span class="n">base</span><span class="o">.</span><span class="n">accept</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="n">move</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
<span class="n">base</span><span class="o">.</span><span class="n">accept</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">move</span><span class="p">,</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
<span class="n">base</span><span class="o">.</span><span class="n">accept</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">move</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
<span class="n">base</span><span class="o">.</span><span class="n">accept</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="n">move</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
<span class="n">base</span><span class="o">.</span><span class="n">accept</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="n">move</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">])</span>
<span class="n">base</span><span class="o">.</span><span class="n">accept</span><span class="p">(</span><span class="s2">&quot;q&quot;</span><span class="p">,</span> <span class="n">move</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">])</span>

<span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>If you run that script, you&#8217;ll get the following output below. The controls
are q, w, e, a, s, d for moving the camera; &#8216;o&#8217; for moving the camera via the
mouse, &#8216;i&#8217; to start the cubes rotating and &#8216;esc&#8217; to quit. You will be
modifying this script as you follow this tutorial series.</p>
<p><a href="#id2"><span class="problematic" id="id3">|Cg\_lesson1\_screen.png|</span></a></p>
</div>
<div class="section" id="d-models-shaders-and-hardware">
<h2>3D Models, Shaders and Hardware<a class="headerlink" href="#d-models-shaders-and-hardware" title="Permalink to this headline">¶</a></h2>
<p>Now that we have the basic script, lets take a look at how 3d models, shaders
and the 3d hardware interact with each other. Please open the file cube.egg
with a text editor. Egg files are human readable. We will need this
information later on to understand how the vertex shader and the fragment
shader works. You can also see how the model looks like in panda by using the
pview model viewer.</p>
<p><a href="#id4"><span class="problematic" id="id5">|Cg\_tut\_cube1.png|</span></a></p>
<div class="highlight-text"><div class="highlight"><pre><span></span>// A vertex entry in an egg file
&lt;Group&gt; {
  &lt;VertexPool&gt; Cube {
    &lt;Vertex&gt; 0 {
      1.0 1.0 -1.0
      &lt;UV&gt; { 1.0 1.0 }
      XXXLTRGBA&gt; { 1.0 0.0 0.0 1.0 }
    }
    ...
</pre></div>
</div>
<p>The cube has six faces. Each face has four different vertices. Therefore this
cube has 24 vertices. Theoretically a cube only needs eight vertices with each
vertex being shared by three faces. The problem with this is that each vertex
can only have one color, but what happens if we want each of the six faces to
be a different color? This is impossible if the cube is only defined with
eight vertices. There are more disadvantages if we only define the cube with
eight vertices, which we will talk about later on. The only advantage of
having less vertices is that we have to send less vertices to the graphic card
but in almost all applications vertices are not a limiting factor. The memory
consumption of vertices in comparison to the memory consumption of textures is
negligible. Besides the color entry for a vertex, a vertex also has one UV
entry associated with it.</p>
<p>Next look at the colors defined in the egg file. If you compare all the color
entries, you will only find eight unique colors in the egg file. Why does the
model have thousands of colors when viewed in the model viewer then? This is
because of linear interpolation, where a value is generated between two
different values based on a &#8220;distance&#8221;. Today graphic cards are very good at
linear interpolation with the ability to do billions of linear interpolations
per second. The downside is that sometimes the graphic card can ONLY do linear
interpolation and you can&#8217;t change that, even with a shader.</p>
<p>Back to the colors. If you have a red color (1.0, 0.0, 0.0) on one vertex and
a dark blue color (0.0, 0.0, 0.5) on the other vertex the graphic card simply
interpolates the color for every pixel between this two vertices, even without
shaders (only if requested, but Panda3D ask the graphic card to do this). The
graphic card doesn&#8217;t know that a color comes in three parts: Red, Green and
Blue. It only knows that it is manipulating values, in this case adjusting the
constituent values for Red Green and Blue. Here is an example of how the
graphic card interpolates:</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="29%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Red Vertex</th>
<th class="head">Blue Vertex</th>
<th class="head">Color value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>100%</td>
<td>0%</td>
<td>(1.0, 0.0, 0.0)</td>
</tr>
<tr class="row-odd"><td>75%</td>
<td>25%</td>
<td>(0.75, 0.0, 0.125)</td>
</tr>
<tr class="row-even"><td>50%</td>
<td>50%</td>
<td>(0.5, 0.0, 0.25)</td>
</tr>
<tr class="row-odd"><td>25%</td>
<td>75%</td>
<td>(0.25, 0.0, 0.375)</td>
</tr>
<tr class="row-even"><td>0%</td>
<td>100%</td>
<td>(0.0, 0.0, 0.5)</td>
</tr>
</tbody>
</table>
<p>A simplified version of how the graphic card draws the model (in reality it
does not work exactly like this but the result is the same): If the graphic
card needs to draw a pixel on a screen it first looks if this pixel is on a
vertex. If it is, it can take the color of the vertex and draw a pixel with
this color. If not, the graphic card looks at which triangle this pixel
belongs. Then it looks at where the vertices of this triangle are and
calculates the distance to each of the vertices. Based on this distance and
the color of the vertices, it interpolates all color components and draws a
pixel with this color.</p>
<p>We&#8217;ve already seen that the graphic card does not care about the fact that a
color consists of the three parts R, G and B. The good thing about this is
that the graphic card can do the calculations for R independent of the other
parts, as is the case for G and B. You may ask, &#8220;why should I care&#8221;? The
advantage is that the graphic card can do calculations for each part in
parallel. A graphic card is in general extremely specialized in parallel
computing. This is also true for vertex shaders and pixel shaders. Each
calculation for a vertex or pixel is done individually. A vertex never knows
how what his neighbor looks like and a pixel never knows what his neighbor&#8217;s
color is. This is a reason why graphic card vendors can improve the
performance of GPUs faster then CPUs. Vertex and pixel shaders are inherently
parallel. The disadvantage of this is that if you need to do some calculations
with respect to the neighboring pixel or vertex, you have to create a complex
setup that often (but not always) is not fast enough for 60+ FPS games.</p>
<p>A blur filter (like in the glow example) is an example of such a setup. You
need at least two passes to create such an effect.</p>
</div>
<div class="section" id="modifying-the-script">
<h2>Modifying the Script<a class="headerlink" href="#modifying-the-script" title="Permalink to this headline">¶</a></h2>
<p>We will now modify the script to see how the normal 3D pipeline blends the
vertex colors with textures. In the tutorial media, there are two textures,
&#8216;arrow.png&#8217; and &#8216;circle.png&#8217;. We will apply these to the cubes using only
Panda.</p>
<p>Place one of the following lines in the script after the cubes are placed in
the scenegraph:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">root</span><span class="o">.</span><span class="n">setTexture</span><span class="p">(</span><span class="n">stageArrow</span><span class="p">,</span> <span class="n">textureArrow</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">setTexture</span><span class="p">(</span><span class="n">stageCircle</span><span class="p">,</span> <span class="n">textureCircle</span><span class="p">)</span>
</pre></div>
</div>
<p>You will notice that the textures get applied to all of the cubes. Now try
placing the textures on individual cubes:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">cubes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">setTexture</span><span class="p">(</span><span class="n">stageArrow</span><span class="p">,</span> <span class="n">textureArrow</span><span class="p">)</span>
<span class="n">cubes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">setTexture</span><span class="p">(</span><span class="n">stageCircle</span><span class="p">,</span> <span class="n">textureCircle</span><span class="p">)</span>
<span class="n">cubes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">setTexture</span><span class="p">(</span><span class="n">stageArrow</span><span class="p">,</span> <span class="n">textureArrow</span><span class="p">)</span>
<span class="n">cubes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">setTexture</span><span class="p">(</span><span class="n">stageCircle</span><span class="p">,</span> <span class="n">textureCircle</span><span class="p">)</span>
</pre></div>
</div>
<p>Now that we have a general idea of how 3D hardware and models work, lets move
on to using shaders.</p>
<p><a class="reference internal" href="cg-tutorial-part-2.html#cg-tutorial-part-2"><span class="std std-ref">Part 2: The simplest possible shader</span></a></p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cg-tutorial-part-2.html" class="btn btn-neutral float-right" title="Cg Tutorial Part 2" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Cg Shader Tutorial" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Panda3D.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.10.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>