

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Bullet Collision Shapes &mdash; Panda3D Manual</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Panda3D Manual" href="../../../index.html"/>
        <link rel="up" title="Using Bullet with Panda3D" href="index.html"/>
        <link rel="next" title="Bullet Collision Filtering" href="collision-filtering.html"/>
        <link rel="prev" title="Bullet Debug Renderer" href="debug-renderer.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Panda3D
          

          
          </a>

          
            
            
              <div class="version">
                1.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../intro/index.html">Introduction to Panda3D</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Programming with Panda3D</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../the-scene-graph/index.html">The Scene Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../the-configuration-file/index.html">The Configuration File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../models-and-actors/index.html">Models and Actors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../render-attributes/index.html">Render Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../texturing/index.html">Texturing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shaders/index.html">Shaders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../camera-control/index.html">Camera Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sound/index.html">Sound</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intervals/index.html">Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tasks-and-event-handling/index.html">Tasks and Event Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../text-and-image-rendering/index.html">Text and Image Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../directgui/index.html">DirectGUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../render-effects/index.html">Render Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../finite-state-machines/index.html">Finite State Machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terrain/index.html">Terrain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../internal-structures/index.html">Advanced operations with Panda3D&#8217;s internal structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../render-to-texture-and-image-postprocessing/index.html">Render-to-Texture and Image Postprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panda3d-rendering-process/index.html">Panda3D Rendering Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panda3d-utility-functions.html">Panda3D Utility Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../particle-effects/index.html">Particle Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../collision-detection/index.html">Collision Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../garbage-collection/index.html">Garbage Collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware-support/index.html">Hardware support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../math-engine/index.html">Math Engine</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Physics</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../panda3d-physics-engine/index.html">Panda3D Physics Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ode/index.html">Using ODE with Panda3D</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Using Bullet with Panda3D</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="hello-world.html">Bullet Hello World</a></li>
<li class="toctree-l4"><a class="reference internal" href="debug-renderer.html">Bullet Debug Renderer</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Bullet Collision Shapes</a></li>
<li class="toctree-l4"><a class="reference internal" href="collision-filtering.html">Bullet Collision Filtering</a></li>
<li class="toctree-l4"><a class="reference internal" href="ccd.html">Bullet Continuous Collision Detection</a></li>
<li class="toctree-l4"><a class="reference internal" href="queries.html">Bullet Queries</a></li>
<li class="toctree-l4"><a class="reference internal" href="ghosts.html">Bullet Ghosts</a></li>
<li class="toctree-l4"><a class="reference internal" href="character-controller.html">Bullet Character Controller</a></li>
<li class="toctree-l4"><a class="reference internal" href="constraints.html">Bullet Constraints</a></li>
<li class="toctree-l4"><a class="reference internal" href="vehicles.html">Bullet Vehicles</a></li>
<li class="toctree-l4"><a class="reference internal" href="softbodies.html">Bullet Softbodies</a></li>
<li class="toctree-l4"><a class="reference internal" href="softbody-rope.html">Bullet Softbody Rope</a></li>
<li class="toctree-l4"><a class="reference internal" href="softbody-patch.html">Bullet Softbody Patch</a></li>
<li class="toctree-l4"><a class="reference internal" href="softbody-triangles.html">Bullet Softbody Triangles</a></li>
<li class="toctree-l4"><a class="reference internal" href="softbody-tetrahedron.html">Bullet Softbody Tetrahedron</a></li>
<li class="toctree-l4"><a class="reference internal" href="softbody-config.html">Bullet Softbody Config</a></li>
<li class="toctree-l4"><a class="reference internal" href="config-options.html">Bullet Config Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="faq.html">Bullet FAQ</a></li>
<li class="toctree-l4"><a class="reference internal" href="samples.html">Bullet Samples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../motion-paths.html">Motion Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../timing/index.html">Timing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../networking/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../multifiles/index.html">Multifiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../showbase.html">ShowBase</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../file-reading.html">File Reading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../threading.html">Threading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subclassing.html">Subclassing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../table-of-features-supported-per-graphic-renderer.html">Table of features supported per graphic renderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pandai/index.html">Artificial Intelligence (PANDAI)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../distribution/index.html">Distributing Panda3D Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples/index.html">Sample Programs in the Distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../debugging/index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../performance-tuning/index.html">Performance Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../using-c++/index.html">Using C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/index.html">Panda3D Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../building-from-source.html">Building Panda3D from Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cheat-sheets.html">Cheat Sheets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting-started-on-osx.html">Getting Started on OSX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../more-panda3d-resources.html">More Panda3D Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../thirdparty-licenses.html">Third-party dependencies and license info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../the-irc-channel.html">The IRC Channel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Panda3D</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Programming with Panda3D</a> &raquo;</li>
      
          <li><a href="../index.html">Physics</a> &raquo;</li>
      
          <li><a href="index.html">Using Bullet with Panda3D</a> &raquo;</li>
      
    <li>Bullet Collision Shapes</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/programming-with-panda3d/physics/bullet/collision-shapes.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="bullet-collision-shapes">
<span id="collision-shapes"></span><h1>Bullet Collision Shapes<a class="headerlink" href="#bullet-collision-shapes" title="Permalink to this headline">¶</a></h1>
<p>On the previous page we have been introduced to Bullet basics. Two simple
collision shapes - a box and a plane - have been used in this simple script.
This page will now introduce more collison shapes provided by Bullet, starting
with primitive shapes and then moving on to more complex ones.</p>
<p>Primitive shapes:</p>
<ul class="simple">
<li>Sphere Shape</li>
<li>Plane Shape</li>
<li>Box Shape</li>
<li>Cylinder Shape</li>
<li>Capsule Shape</li>
<li>Cone Shape</li>
</ul>
<p>Complex shapes:</p>
<ul class="simple">
<li>Compound Shape</li>
<li>Convex Hull Shape</li>
<li>Triangle Mesh Shape</li>
<li>Heightfield Shape</li>
<li>Soft Body Shape</li>
<li>Multi Sphere Shape</li>
<li>Convex Point Cloud Shape</li>
</ul>
<div class="section" id="sphere-shape">
<h2>Sphere Shape<a class="headerlink" href="#sphere-shape" title="Permalink to this headline">¶</a></h2>
<p>The most basic collision shape, a sphere with radius radius. The sphere is
centered around it&#8217;s origin.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">panda3d.bullet</span> <span class="kn">import</span> <span class="n">BulletSphereShape</span>
<span class="n">radius</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">shape</span> <span class="o">=</span> <span class="n">BulletSphereShape</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;bulletSphereShape.h&quot;</span><span class="cp"></span>
<span class="p">...</span>
<span class="kt">double</span> <span class="n">radius</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>
<span class="n">PT</span><span class="p">(</span><span class="n">BulletSphereShape</span><span class="p">)</span> <span class="n">sphere_shape</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulletSphereShape</span><span class="p">(</span><span class="n">radius</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="plane-shape">
<h2>Plane Shape<a class="headerlink" href="#plane-shape" title="Permalink to this headline">¶</a></h2>
<p>Another primitive collision shape, an infinite plane. To create a plane you
have to pass both the plane&#8217;s normal vector (Vec3(nx, ny, nz)) and the plane
constant (d, which is the distance of the plane&#8217;s origin. Planes can only be
used for static objects.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">panda3d.bullet</span> <span class="kn">import</span> <span class="n">BulletPlaneShape</span>
<span class="n">normal</span> <span class="o">=</span> <span class="n">Vec3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">shape</span> <span class="o">=</span> <span class="n">BulletPlaneShape</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;bulletPlaneShape.h&quot;</span><span class="cp"></span>
<span class="p">...</span>
<span class="n">LVecBase3f</span> <span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="kt">double</span> <span class="n">d</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">PT</span><span class="p">(</span><span class="n">BulletPlaneShape</span><span class="p">)</span> <span class="n">floor_shape</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulletPlaneShape</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">d</span><span class="p">);</span>
<span class="p">...</span>
</pre></div>
</div>
</div>
<div class="section" id="box-shape">
<h2>Box Shape<a class="headerlink" href="#box-shape" title="Permalink to this headline">¶</a></h2>
<p>A box-shaped primitive collision shape. To create a box you have to pass a
vector with the half-extents (Vec3(dx, dx, dx)). The full extents of the box
will be twice the half extents, e. g. from -dx to +dx on the local x-axis.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">panda3d.bullet</span> <span class="kn">import</span> <span class="n">BulletBoxShape</span>
<span class="n">dx</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">dy</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">dz</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">shape</span> <span class="o">=</span> <span class="n">BulletBoxShape</span><span class="p">(</span><span class="n">Vec3</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dz</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;bulletBoxShape.h&quot;</span><span class="cp"></span>
<span class="p">...</span>
<span class="kt">double</span> <span class="n">dx</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">dy</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">dz</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>
<span class="n">PT</span><span class="p">(</span><span class="n">BulletBoxShape</span><span class="p">)</span> <span class="n">box_shape</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulletBoxShape</span><span class="p">(</span><span class="n">LVecBase3f</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span><span class="n">dy</span><span class="p">,</span><span class="n">dz</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="section" id="cylinder-shape">
<h2>Cylinder Shape<a class="headerlink" href="#cylinder-shape" title="Permalink to this headline">¶</a></h2>
<p>A primitive collision shape which is represents a cylinder. We can create a
cylinder shape by either passing it&#8217;s radius, height and cylinder axis, or by
passing a vector with half extents and the cylinder axis. The following
example creates two cylinder shapes, both with radius 0.5 and height 1.4.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">panda3d.bullet</span> <span class="kn">import</span> <span class="n">BulletCylinderShape</span>
<span class="n">radius</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">height</span> <span class="o">=</span> <span class="mf">1.4</span>
<span class="n">shape1</span> <span class="o">=</span> <span class="n">BulletCylinderShape</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">ZUp</span><span class="p">)</span>
<span class="n">shape2</span> <span class="o">=</span> <span class="n">BulletCylinderShape</span><span class="p">(</span><span class="n">Vec3</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">height</span><span class="p">),</span> <span class="n">ZUp</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;bulletCylinderShape.h&quot;</span><span class="cp"></span>
<span class="p">...</span>
<span class="kt">double</span> <span class="n">radius</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">height</span> <span class="o">=</span> <span class="mf">1.4</span><span class="p">;</span>
<span class="n">PT</span><span class="p">(</span><span class="n">BulletCylinderShape</span><span class="p">)</span> <span class="n">cylinder_shape_one</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulletCylinderShape</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="n">height</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="capsule-shape">
<h2>Capsule Shape<a class="headerlink" href="#capsule-shape" title="Permalink to this headline">¶</a></h2>
<p>A primitive collision shape which is a &#8220;capped&#8221; cylinder. &#8220;Capped&#8221; means that
there are half-spheres at both ends, unlike the real cylinder which has flat
ends. Capsule shapes are a good choice for character controllers, since they
are fast, symmetrical, and allow smooth movement over steps.</p>
<p>To create a capsule shape we have to pass the capsule&#8217;s radius, the height of
the cylindrical part, and the up-axis. The total height of the capsule will be
the height of the cylindrical part, plus twice the radius.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">panda3d.bullet</span> <span class="kn">import</span> <span class="n">BulletCapsuleShape</span>
<span class="n">radius</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">height</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">shape</span> <span class="o">=</span> <span class="n">BulletCapsuleShape</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">ZUp</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;bulletCapsuleShape.h&quot;</span><span class="cp"></span>
<span class="p">...</span>
<span class="kt">double</span> <span class="n">radius</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">height</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>
<span class="n">PT</span><span class="p">(</span><span class="n">BulletCapsuleShape</span><span class="p">)</span> <span class="n">capsule_shape</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulletCapsuleShape</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="n">height</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="cone-shape">
<h2>Cone Shape<a class="headerlink" href="#cone-shape" title="Permalink to this headline">¶</a></h2>
<p>Again a primitive collision shape, which represents a cone. We have to pass
the radius of the circular base of the cone, and it&#8217;s height.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">panda3d.bullet</span> <span class="kn">import</span> <span class="n">BulletConeShape</span>
<span class="n">radius</span> <span class="o">=</span> <span class="mf">0.6</span>
<span class="n">height</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">shape</span> <span class="o">=</span> <span class="n">BulletConeShape</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">ZUp</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;bulletConeShape.h&quot;</span><span class="cp"></span>
<span class="p">...</span>
<span class="kt">double</span> <span class="n">radius</span> <span class="o">=</span> <span class="mf">0.6</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">height</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>
<span class="n">PT</span><span class="p">(</span><span class="n">BulletConeShape</span><span class="p">)</span> <span class="n">cone_shape</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulletConeShape</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="n">height</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="compound-shape">
<h2>Compound Shape<a class="headerlink" href="#compound-shape" title="Permalink to this headline">¶</a></h2>
<p>Compound shapes are assemblies made up from two or more individual shapes. For
example you could create a collision shape for a table from five box shapes.
One &#8220;flat&#8221; box for the table plate, and four &#8220;thin&#8221; ones for the table legs.</p>
<p>The Panda3D Bullet module has no specialized class for compound shapes. It
automatically creates a compound shape if more than one shape is added to a
body node.</p>
<p>The following code snippet will create such a compound shape, resembling the
before mentioned table.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">shape1</span> <span class="o">=</span> <span class="n">BulletBoxShape</span><span class="p">(</span><span class="n">Vec3</span><span class="p">(</span><span class="mf">1.3</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">))</span>
<span class="n">shape2</span> <span class="o">=</span> <span class="n">BulletBoxShape</span><span class="p">(</span><span class="n">Vec3</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
<span class="n">shape3</span> <span class="o">=</span> <span class="n">BulletBoxShape</span><span class="p">(</span><span class="n">Vec3</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
<span class="n">shape4</span> <span class="o">=</span> <span class="n">BulletBoxShape</span><span class="p">(</span><span class="n">Vec3</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
<span class="n">shape5</span> <span class="o">=</span> <span class="n">BulletBoxShape</span><span class="p">(</span><span class="n">Vec3</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>

<span class="n">bodyNP</span><span class="o">.</span><span class="n">node</span><span class="p">()</span><span class="o">.</span><span class="n">addShape</span><span class="p">(</span><span class="n">shape1</span><span class="p">,</span> <span class="n">TransformState</span><span class="o">.</span><span class="n">makePos</span><span class="p">(</span><span class="n">Point3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)))</span>
<span class="n">bodyNP</span><span class="o">.</span><span class="n">node</span><span class="p">()</span><span class="o">.</span><span class="n">addShape</span><span class="p">(</span><span class="n">shape2</span><span class="p">,</span> <span class="n">TransformState</span><span class="o">.</span><span class="n">makePos</span><span class="p">(</span><span class="n">Point3</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">)))</span>
<span class="n">bodyNP</span><span class="o">.</span><span class="n">node</span><span class="p">()</span><span class="o">.</span><span class="n">addShape</span><span class="p">(</span><span class="n">shape3</span><span class="p">,</span> <span class="n">TransformState</span><span class="o">.</span><span class="n">makePos</span><span class="p">(</span><span class="n">Point3</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">)))</span>
<span class="n">bodyNP</span><span class="o">.</span><span class="n">node</span><span class="p">()</span><span class="o">.</span><span class="n">addShape</span><span class="p">(</span><span class="n">shape4</span><span class="p">,</span> <span class="n">TransformState</span><span class="o">.</span><span class="n">makePos</span><span class="p">(</span><span class="n">Point3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">)))</span>
<span class="n">bodyNP</span><span class="o">.</span><span class="n">node</span><span class="p">()</span><span class="o">.</span><span class="n">addShape</span><span class="p">(</span><span class="n">shape5</span><span class="p">,</span> <span class="n">TransformState</span><span class="o">.</span><span class="n">makePos</span><span class="p">(</span><span class="n">Point3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">)))</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">PT</span><span class="p">(</span><span class="n">BulletBoxShape</span><span class="p">)</span> <span class="n">shape1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulletBoxShape</span><span class="p">(</span><span class="n">LVecBase3f</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.5</span><span class="p">));</span>
<span class="n">PT</span><span class="p">(</span><span class="n">BulletBoxShape</span><span class="p">)</span> <span class="n">shape2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulletBoxShape</span><span class="p">(</span><span class="n">LVecBase3f</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.5</span><span class="p">));</span>
<span class="n">PT</span><span class="p">(</span><span class="n">BulletBoxShape</span><span class="p">)</span> <span class="n">shape3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulletBoxShape</span><span class="p">(</span><span class="n">LVecBase3f</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.5</span><span class="p">));</span>
<span class="n">PT</span><span class="p">(</span><span class="n">BulletBoxShape</span><span class="p">)</span> <span class="n">shape4</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulletBoxShape</span><span class="p">(</span><span class="n">LVecBase3f</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.5</span><span class="p">));</span>
<span class="n">PT</span><span class="p">(</span><span class="n">BulletBoxShape</span><span class="p">)</span> <span class="n">shape5</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulletBoxShape</span><span class="p">(</span><span class="n">LVecBase3f</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.5</span><span class="p">));</span>

<span class="n">np_body</span><span class="p">.</span><span class="n">node</span><span class="p">().</span><span class="n">add_shape</span> <span class="p">(</span><span class="n">shape1</span><span class="p">,</span> <span class="n">TransformState</span><span class="o">::</span><span class="n">make_pos</span><span class="p">(</span><span class="n">LPoint3f</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)));</span>
<span class="n">np_body</span><span class="p">.</span><span class="n">node</span><span class="p">().</span><span class="n">add_shape</span> <span class="p">(</span><span class="n">shape2</span><span class="p">,</span> <span class="n">TransformState</span><span class="o">::</span><span class="n">make_pos</span><span class="p">(</span><span class="n">LPoint3f</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)));</span>
<span class="n">np_body</span><span class="p">.</span><span class="n">node</span><span class="p">().</span><span class="n">add_shape</span> <span class="p">(</span><span class="n">shape3</span><span class="p">,</span> <span class="n">TransformState</span><span class="o">::</span><span class="n">make_pos</span><span class="p">(</span><span class="n">LPoint3f</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)));</span>
<span class="n">np_body</span><span class="p">.</span><span class="n">node</span><span class="p">().</span><span class="n">add_shape</span> <span class="p">(</span><span class="n">shape4</span><span class="p">,</span> <span class="n">TransformState</span><span class="o">::</span><span class="n">make_pos</span><span class="p">(</span><span class="n">LPoint3f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)));</span>
<span class="n">np_body</span><span class="p">.</span><span class="n">node</span><span class="p">().</span><span class="n">add_shape</span> <span class="p">(</span><span class="n">shape5</span><span class="p">,</span> <span class="n">TransformState</span><span class="o">::</span><span class="n">make_pos</span><span class="p">(</span><span class="n">LPoint3f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)));</span>
</pre></div>
</div>
</div>
<div class="section" id="convex-hull-shape">
<h2>Convex Hull Shape<a class="headerlink" href="#convex-hull-shape" title="Permalink to this headline">¶</a></h2>
<p>The first of the non-primitive collision shapes. A good analogy for a convex
hull is an elastic membrane or balloon under pressure which is placed around a
given set of vertices. When released the membrane will assume the shape of the
convex hull. Convex hull shapes should be used for dynamic objects, if it is
not possible to find a good approximation of the objects shape using collision
primitives.</p>
<p>Convex hull shapes can be created is several ways:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">panda3d.bullet</span> <span class="kn">import</span> <span class="n">BulletConvexHullShape</span>

<span class="c1"># Add each vertex separately</span>
<span class="n">shape1</span> <span class="o">=</span> <span class="n">BulletConvexHullShape</span><span class="p">()</span>
<span class="n">shape1</span><span class="o">.</span><span class="n">addPoint</span><span class="p">(</span><span class="n">Point3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">shape1</span><span class="o">.</span><span class="n">addPoint</span><span class="p">(</span><span class="n">Point3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">shape1</span><span class="o">.</span><span class="n">addPoint</span><span class="p">(</span><span class="n">Point3</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">shape1</span><span class="o">.</span><span class="n">addPoint</span><span class="p">(</span><span class="n">Point3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">shape1</span><span class="o">.</span><span class="n">addPoint</span><span class="p">(</span><span class="n">Point3</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

<span class="c1"># Add several vertices with a single call</span>
<span class="n">shape2</span> <span class="o">=</span> <span class="n">BulletConvexHullShape</span><span class="p">()</span>
<span class="n">shape2</span><span class="o">.</span><span class="n">addArray</span><span class="p">([</span>
  <span class="n">Point3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
  <span class="n">Point3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
  <span class="n">Point3</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
  <span class="n">Point3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
  <span class="n">Point3</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
  <span class="p">])</span>

<span class="c1"># Add all vertices which can be found in a Geom object</span>
<span class="n">geomNodes</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">loadModel</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">findAllMatches</span><span class="p">(</span><span class="s1">&#39;**/+GeomNode&#39;</span><span class="p">)</span>
<span class="n">geomNode</span> <span class="o">=</span> <span class="n">geomNodes</span><span class="o">.</span><span class="n">getPath</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">node</span><span class="p">()</span>
<span class="n">geom</span> <span class="o">=</span> <span class="n">geomNode</span><span class="o">.</span><span class="n">getGeom</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">shape3</span> <span class="o">=</span> <span class="n">BulletConvexHullShape</span><span class="p">()</span>
<span class="n">shape3</span><span class="o">.</span><span class="n">addGeom</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;bulletConvexHullShape.h&quot;</span><span class="cp"></span>
<span class="p">...</span>

<span class="c1">// Add each vertex separately</span>
<span class="n">PT</span><span class="p">(</span><span class="n">BulletConvexHullShape</span><span class="p">)</span> <span class="n">convex_hull_shape</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulletConvexHullShape</span><span class="p">();</span>
<span class="n">convex_hull_shape</span><span class="o">-&gt;</span><span class="n">add_point</span><span class="p">(</span><span class="n">LPoint3f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>
<span class="n">convex_hull_shape</span><span class="o">-&gt;</span><span class="n">add_point</span><span class="p">(</span><span class="n">LPoint3f</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
<span class="n">convex_hull_shape</span><span class="o">-&gt;</span><span class="n">add_point</span><span class="p">(</span><span class="n">LPoint3f</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
<span class="n">convex_hull_shape</span><span class="o">-&gt;</span><span class="n">add_point</span><span class="p">(</span><span class="n">LPoint3f</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
<span class="n">convex_hull_shape</span><span class="o">-&gt;</span><span class="n">add_point</span><span class="p">(</span><span class="n">LPoint3f</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="section" id="triangle-mesh-shape">
<h2>Triangle Mesh Shape<a class="headerlink" href="#triangle-mesh-shape" title="Permalink to this headline">¶</a></h2>
<p>Another non-primitive collision shape. A triangle mesh shape is similar to the
convex hull shape, except that it is not restricted to convex geometry; it can
contain concave parts. A typical use case for triangle mesh shapes is the
static geometry of a game level. However, it is possible to use triangle mesh
shapes for dynamic objects too. We have to explicitly tell Bullet if we want a
static or dynamic triangle mesh shape at the time the shape is created.</p>
<p>To create a triangle mesh shape, we first have to create a triangle mesh
object. The following example will create a simple quad composed of two
triangles.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">panda3d.bullet</span> <span class="kn">import</span> <span class="n">BulletTriangleMeshShape</span>
<span class="n">p0</span> <span class="o">=</span> <span class="n">Point3</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">p1</span> <span class="o">=</span> <span class="n">Point3</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">p2</span> <span class="o">=</span> <span class="n">Point3</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">p3</span> <span class="o">=</span> <span class="n">Point3</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">BulletTriangleMesh</span><span class="p">()</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">addTriangle</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">addTriangle</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">)</span>
<span class="n">shape</span> <span class="o">=</span> <span class="n">BulletTriangleMeshShape</span><span class="p">(</span><span class="n">mesh</span><span class="p">,</span> <span class="n">dynamic</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;bulletTriangleMesh.h&quot;</span><span class="cp"></span>
<span class="p">...</span>
<span class="n">LPoint3f</span> <span class="n">points_array</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">LPoint3f</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">LPoint3f</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">LPoint3f</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">LPoint3f</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<span class="p">};</span>

<span class="n">PT</span><span class="p">(</span><span class="n">BulletTriangleMesh</span><span class="p">)</span> <span class="n">triangle_mesh</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulletTriangleMesh</span><span class="p">;</span>
<span class="n">triangle_mesh</span><span class="o">-&gt;</span><span class="n">add_triangle</span><span class="p">(</span><span class="n">points_array</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">points_array</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">points_array</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
<span class="n">triangle_mesh</span><span class="o">-&gt;</span><span class="n">add_triangle</span><span class="p">(</span><span class="n">points_array</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">points_array</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">points_array</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>

<span class="n">PT</span><span class="p">(</span><span class="n">BulletTriangleMeshShape</span><span class="p">)</span> <span class="n">triangle_mesh_shape</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulletTriangleMeshShape</span><span class="p">(</span><span class="n">triangle_mesh</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
</pre></div>
</div>
<p>We can use a convenience method to add all triangles from a Geom object with
one method call. The geom will be decomposed first, so it does not have to
contain only triangles; for example, it can contain triangle strips too.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">panda3d.bullet</span> <span class="kn">import</span> <span class="n">BulletTriangleMesh</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">BulletTriangleMesh</span><span class="p">()</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">addGeom</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;bulletTriangleMesh.h&quot;</span><span class="cp"></span>
<span class="p">...</span>
<span class="n">PT</span><span class="p">(</span><span class="n">BulletTriangleMesh</span><span class="p">)</span> <span class="n">triangle_mesh</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulletTriangleMesh</span><span class="p">();</span>
<span class="n">triangle_mesh</span><span class="o">-&gt;</span><span class="n">add_geom</span><span class="p">(</span><span class="n">geom</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="heightfield-shape">
<h2>Heightfield Shape<a class="headerlink" href="#heightfield-shape" title="Permalink to this headline">¶</a></h2>
<p>A special non-primitive collision shape. Give a heightfield image we can
construct a terrain mesh with only a few lines of code.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">panda3d.core</span> <span class="kn">import</span> <span class="n">Filename</span>
<span class="kn">from</span> <span class="nn">panda3d.core</span> <span class="kn">import</span> <span class="n">PNMImage</span>
<span class="kn">from</span> <span class="nn">panda3d.bullet</span> <span class="kn">import</span> <span class="n">BulletHeightfieldShape</span>
<span class="kn">from</span> <span class="nn">panda3d.bullet</span> <span class="kn">import</span> <span class="n">ZUp</span>
<span class="n">height</span> <span class="o">=</span> <span class="mf">10.0</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">PNMImage</span><span class="p">(</span><span class="n">Filename</span><span class="p">(</span><span class="s1">&#39;elevation.png&#39;</span><span class="p">))</span>
<span class="n">shape</span> <span class="o">=</span> <span class="n">BulletHeightfieldShape</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">ZUp</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;pnmImage.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;bulletHeightfieldShape.h&quot;</span><span class="cp"></span>

<span class="n">PNMImage</span> <span class="n">pnm_image</span><span class="p">;</span>
<span class="n">pnm_image</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">Filename</span><span class="p">(</span><span class="s">&quot;models/elevation.png&quot;</span><span class="p">));</span>

<span class="n">PT</span><span class="p">(</span><span class="n">BulletHeightfieldShape</span><span class="p">)</span> <span class="n">heightfield_shape</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulletHeightfieldShape</span><span class="p">(</span><span class="o">*</span><span class="n">pnm_image</span><span class="p">,</span> <span class="n">height</span><span class="p">);</span>
</pre></div>
</div>
<p>The heightfield shape will be oriented the same way as a GeoMipTerrain created
from the same image, but GeoMipTerrain and BulletHeightfieldShape have
different origins. The BulletHeightfieldShape is centered around the origin,
while the GeoMipTerrain uses the lower left corner as its origin. However,
this can be easily corrected by positioning the GeoMipTerrain with an offset
relative to the static rigid body node.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">panda3d.core</span> <span class="kn">import</span> <span class="n">Filename</span>
<span class="n">offset</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">getXSize</span><span class="p">()</span> <span class="o">/</span> <span class="mf">2.0</span> <span class="o">-</span> <span class="mf">0.5</span>
<span class="n">terrain</span> <span class="o">=</span> <span class="n">GeoMipTerrain</span><span class="p">(</span><span class="s1">&#39;terrain&#39;</span><span class="p">)</span>
<span class="n">terrain</span><span class="o">.</span><span class="n">setHeightfield</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
<span class="n">terrainNP</span> <span class="o">=</span> <span class="n">terrain</span><span class="o">.</span><span class="n">getRoot</span><span class="p">()</span>
<span class="n">terrainNP</span><span class="o">.</span><span class="n">setSz</span><span class="p">(</span><span class="n">height</span><span class="p">)</span>
<span class="n">terrainNP</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="o">-</span><span class="n">offset</span><span class="p">,</span> <span class="o">-</span><span class="n">offset</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">GeoMipTerrain</span> <span class="o">*</span><span class="n">terrain</span> <span class="o">=</span> <span class="n">get_geomip_terrain</span><span class="p">();</span>
<span class="n">terrain</span><span class="o">-&gt;</span><span class="n">set_heightfield</span><span class="p">(</span><span class="o">*</span><span class="n">pnm_image</span><span class="p">);</span>
<span class="n">terrain</span><span class="o">-&gt;</span><span class="n">set_block_size</span><span class="p">(</span><span class="mi">32</span><span class="p">);</span>
<span class="n">terrain</span><span class="o">-&gt;</span><span class="n">set_near</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
<span class="n">terrain</span><span class="o">-&gt;</span><span class="n">set_far</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="n">terrain</span><span class="o">-&gt;</span><span class="n">set_focal_point</span><span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">get_camera_group</span><span class="p">());</span>

<span class="n">NodePath</span> <span class="n">terrain_root</span> <span class="o">=</span> <span class="n">terrain</span><span class="o">-&gt;</span><span class="n">get_root</span><span class="p">();</span>

<span class="kt">float</span> <span class="n">offset</span> <span class="o">=</span> <span class="n">pnm_image</span><span class="o">-&gt;</span><span class="n">get_x_size</span><span class="p">()</span> <span class="o">/</span> <span class="mf">2.0</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">;</span>
<span class="n">terrain_root</span><span class="p">.</span><span class="n">set_pos</span><span class="p">(</span><span class="o">-</span><span class="n">offset</span><span class="p">,</span> <span class="o">-</span><span class="n">offset</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">);</span>

<span class="n">terrain_root</span><span class="p">.</span><span class="n">set_scale</span><span class="p">(</span><span class="n">terrain_root</span><span class="p">.</span><span class="n">get_scale</span><span class="p">().</span><span class="n">get_x</span><span class="p">(),</span> <span class="n">terrain_root</span><span class="p">.</span><span class="n">get_scale</span><span class="p">().</span><span class="n">get_y</span><span class="p">(),</span> <span class="n">height</span><span class="p">);</span>
<span class="n">terrain_root</span><span class="p">.</span><span class="n">reparent_to</span><span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">get_render</span><span class="p">());</span>
</pre></div>
</div>
</div>
<div class="section" id="soft-body-shape">
<h2>Soft Body Shape<a class="headerlink" href="#soft-body-shape" title="Permalink to this headline">¶</a></h2>
<p>This special collision shape is used in connection with soft bodies. It can
not be created directly. Soft bodies will be discussed later within this
manual.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="collision-filtering.html" class="btn btn-neutral float-right" title="Bullet Collision Filtering" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="debug-renderer.html" class="btn btn-neutral" title="Bullet Debug Renderer" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Panda3D.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.10.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>