

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Worlds, Bodies and Masses &mdash; Panda3D Manual</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Panda3D Manual" href="../../../index.html"/>
        <link rel="up" title="Using ODE with Panda3D" href="index.html"/>
        <link rel="next" title="Simulating the Physics World" href="simulating-the-physics-world.html"/>
        <link rel="prev" title="Using ODE with Panda3D" href="index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Panda3D
          

          
          </a>

          
            
            
              <div class="version">
                1.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../intro/index.html">Introduction to Panda3D</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Programming with Panda3D</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../the-scene-graph/index.html">The Scene Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../the-configuration-file/index.html">The Configuration File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../models-and-actors/index.html">Models and Actors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../render-attributes/index.html">Render Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../texturing/index.html">Texturing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shaders/index.html">Shaders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../camera-control/index.html">Camera Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sound/index.html">Sound</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intervals/index.html">Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tasks-and-event-handling/index.html">Tasks and Event Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../text-and-image-rendering/index.html">Text and Image Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../directgui/index.html">DirectGUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../render-effects/index.html">Render Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../finite-state-machines/index.html">Finite State Machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terrain/index.html">Terrain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../internal-structures/index.html">Advanced operations with Panda3D&#8217;s internal structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../render-to-texture-and-image-postprocessing/index.html">Render-to-Texture and Image Postprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panda3d-rendering-process/index.html">Panda3D Rendering Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panda3d-utility-functions.html">Panda3D Utility Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../particle-effects/index.html">Particle Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../collision-detection/index.html">Collision Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../garbage-collection/index.html">Garbage Collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware-support/index.html">Hardware support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../math-engine/index.html">Math Engine</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Physics</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../panda3d-physics-engine/index.html">Panda3D Physics Engine</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Using ODE with Panda3D</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Worlds, Bodies and Masses</a></li>
<li class="toctree-l4"><a class="reference internal" href="simulating-the-physics-world.html">Simulating the Physics World</a></li>
<li class="toctree-l4"><a class="reference internal" href="attaching-bodies-using-joints.html">Attaching Bodies using Joints</a></li>
<li class="toctree-l4"><a class="reference internal" href="collision-detection-with-ode.html">Collision Detection with ODE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../bullet/index.html">Using Bullet with Panda3D</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../motion-paths.html">Motion Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../timing/index.html">Timing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../networking/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../multifiles/index.html">Multifiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../showbase.html">ShowBase</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../file-reading.html">File Reading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../threading.html">Threading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subclassing.html">Subclassing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../table-of-features-supported-per-graphic-renderer.html">Table of features supported per graphic renderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pandai/index.html">Artificial Intelligence (PANDAI)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../distribution/index.html">Distributing Panda3D Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples/index.html">Sample Programs in the Distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../debugging/index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../performance-tuning/index.html">Performance Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../using-c++/index.html">Using C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/index.html">Panda3D Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../building-from-source.html">Building Panda3D from Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cheat-sheets.html">Cheat Sheets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting-started-on-osx.html">Getting Started on OSX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../more-panda3d-resources.html">More Panda3D Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../thirdparty-licenses.html">Third-party dependencies and license info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../the-irc-channel.html">The IRC Channel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Panda3D</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Programming with Panda3D</a> &raquo;</li>
      
          <li><a href="../index.html">Physics</a> &raquo;</li>
      
          <li><a href="index.html">Using ODE with Panda3D</a> &raquo;</li>
      
    <li>Worlds, Bodies and Masses</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/programming-with-panda3d/physics/ode/worlds-bodies-and-masses.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="worlds-bodies-and-masses">
<span id="id1"></span><h1>Worlds, Bodies and Masses<a class="headerlink" href="#worlds-bodies-and-masses" title="Permalink to this headline">¶</a></h1>
<div class="section" id="worlds">
<h2>Worlds<a class="headerlink" href="#worlds" title="Permalink to this headline">¶</a></h2>
<p>To use the ODE physics system, you need to have an OdeWorld. A world is an
essential component in the physics structure, it holds all your rigid bodies
and joints, and controls global parameters, such as gravity, for the scene.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">panda3d.ode</span> <span class="kn">import</span> <span class="n">OdeWorld</span>
<span class="n">myWorld</span> <span class="o">=</span> <span class="n">OdeWorld</span><span class="p">()</span>
<span class="n">myWorld</span><span class="o">.</span><span class="n">setGravity</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.81</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;odeWorld.h&quot;</span><span class="cp"></span>

<span class="n">OdeWorld</span> <span class="n">myWorld</span><span class="p">;</span>
<span class="n">myWorld</span><span class="p">.</span><span class="n">set_gravity</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.81</span><span class="p">);</span>
</pre></div>
</div>
<p>As you can see, the gravity is set to a downward vector with length 9.81. This
value is the average gravity acceleration on Earth. If you want objects to
fall faster or slower, (e.g. if your game plays on the Moon, where the gravity
acceleration is 1.62 m/s²) you need to change this value, but in most cases
you want to leave it around 9.81 m/s².</p>
</div>
<div class="section" id="bodies-and-masses">
<h2>Bodies and masses<a class="headerlink" href="#bodies-and-masses" title="Permalink to this headline">¶</a></h2>
<p>In physics space, the objects that matter are called bodies. In order to have
something affected by physics, you need to create an OdeBody, and set an
OdeMass on it.</p>
<p>An OdeMass does not just define how much an object weighs. You roughly have to
specify a shape so ODE will know how the mass is divided over the body. Also,
ODE will have to know either the density of the object or the mass.</p>
<p>In the following example the geometry is assumed to be a box-shaped object
made of lead, and the box has a width, length and height of 1 meter.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">panda3d.ode</span> <span class="kn">import</span> <span class="n">OdeBody</span><span class="p">,</span> <span class="n">OdeMass</span>
<span class="n">myBody</span> <span class="o">=</span> <span class="n">OdeBody</span><span class="p">(</span><span class="n">myWorld</span><span class="p">)</span>
<span class="n">myBody</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="n">somePandaObject</span><span class="o">.</span><span class="n">getPos</span><span class="p">(</span><span class="n">render</span><span class="p">))</span>
<span class="n">myBody</span><span class="o">.</span><span class="n">setQuaternion</span><span class="p">(</span><span class="n">somePandaObject</span><span class="o">.</span><span class="n">getQuat</span><span class="p">(</span><span class="n">render</span><span class="p">))</span>
<span class="n">myMass</span> <span class="o">=</span> <span class="n">OdeMass</span><span class="p">()</span>
<span class="n">myMass</span><span class="o">.</span><span class="n">setBox</span><span class="p">(</span><span class="mi">11340</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">myBody</span><span class="o">.</span><span class="n">setMass</span><span class="p">(</span><span class="n">myMass</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;odeBody.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;odeMass.h&quot;</span><span class="cp"></span>

<span class="n">OdeBody</span> <span class="nf">myBody</span> <span class="p">(</span><span class="n">myWorld</span><span class="p">);</span>
<span class="n">myBody</span><span class="p">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">somePandaObject</span><span class="p">.</span><span class="n">get_pos</span><span class="p">(</span><span class="n">render</span><span class="p">));</span>
<span class="n">myBody</span><span class="p">.</span><span class="n">set_quaternion</span><span class="p">(</span><span class="n">somePandaObject</span><span class="p">.</span><span class="n">get_quat</span><span class="p">(</span><span class="n">render</span><span class="p">));</span>
<span class="n">OdeMass</span> <span class="n">myMass</span><span class="p">;</span>
<span class="n">myMass</span><span class="p">.</span><span class="n">set_box</span><span class="p">(</span><span class="mi">11340</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">myBody</span><span class="p">.</span><span class="n">set_mass</span><span class="p">(</span><span class="n">myMass</span><span class="p">);</span>
</pre></div>
</div>
<p>First, the position and quaternion are set of the body, this is directly
copied from the NodePath&#8217;s pos and quat; do note that when using getPos and
getQuat, you need to get them in global coordinate space, this is done here by
specifying <code class="docutils literal"><span class="pre">render</span></code> as first
argument.</p>
<p>Then, a mass is set for the body. The first argument specified in the setBox
call is the <a class="reference external" href="http://en.wikipedia.org/wiki/Density">density</a> of the object,
the second is the dimensions (lx, ly, lz) of the box. Each material has it&#8217;s
own density, for example, water has a density of 1000 kg/m³, copper usually
between 8920 and 8960 kg/m³. The value shown in the example above is the
density for lead.</p>
<p>There are of course cases where you don&#8217;t know the density (although it is
easy to calculate), or when the object is not easy to fit in a box shape.
OdeMass provides the following methods:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">setZero()</span></code>: Sets all the mass
parameters to 0, meaning it will have no mass at all.</li>
<li><code class="docutils literal"><span class="pre">setSphere(density,</span> <span class="pre">radius)</span></code>: This specifies that
the object&#8217;s mass is spherical with the given radius.</li>
<li><code class="docutils literal"><span class="pre">setSphereTotal(total_mass,</span> <span class="pre">radius)</span></code>: Use this if you
don&#8217;t know the density but do know the total mass of the object.</li>
<li><code class="docutils literal"><span class="pre">setBox(density,</span> <span class="pre">lx,</span> <span class="pre">ly,</span> <span class="pre">lz)</span></code>: Use this for
box-shaped objects.</li>
<li><code class="docutils literal"><span class="pre">setBoxTotal(total_mass,</span> <span class="pre">lx,</span> <span class="pre">ly,</span> <span class="pre">lz)</span></code>: The same as the
former, but specifies the total mass instead of the density.</li>
<li><code class="docutils literal"><span class="pre">setCylinder(density,</span> <span class="pre">direction,</span> <span class="pre">radius,</span> <span class="pre">length)</span></code>: To be used for
objects shaped like a cylinder.</li>
<li><code class="docutils literal"><span class="pre">setCylinderTotal(total_mass,</span> <span class="pre">direction,</span> <span class="pre">radius,</span> <span class="pre">length)</span></code>: Again the same
cylinder, but specifies the mass instead of the density.</li>
<li><code class="docutils literal"><span class="pre">setCapsule(density,</span> <span class="pre">direction,</span> <span class="pre">radius,</span> <span class="pre">length)</span></code>: A capsule is
similar to a cylinder, but has capped edges.</li>
<li><code class="docutils literal"><span class="pre">setCapsuleTotal(total_mass,</span> <span class="pre">direction,</span> <span class="pre">radius,</span> <span class="pre">length)</span></code>: Use this if you
only have a mass and not the density.</li>
<li><code class="docutils literal"><span class="pre">add(other)</span></code>: Adds an other
OdeMass object to this mass.</li>
<li><code class="docutils literal"><span class="pre">adjust(total_mass)</span></code>: Adjusts the mass
parameters to have the specified mass.</li>
<li><code class="docutils literal"><span class="pre">rotate(matrix)</span></code>: Rotates the matrix
using the specified Mat3 object.</li>
</ul>
<p>More methods are listed in the <a class="reference external" href="https://www.panda3d.org/apiref.php?page=OdeMass">API
reference</a>.</p>
<p>For more complex shapes, you might want to decompose the object into several
simple ones, and use the
<code class="docutils literal"><span class="pre">add(other)</span></code> method to add the
masses together. If that still isn&#8217;t enough, you might want to set the
individual parameters of the mass using
<code class="docutils literal"><span class="pre">setParameters</span></code>, which is not explained
here because it that goes beyond the scope of this manual page. Note that the
shape you set is not actually used for collisions: it&#8217;s just used to roughly
determine how the mass is divided in the object.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="simulating-the-physics-world.html" class="btn btn-neutral float-right" title="Simulating the Physics World" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Using ODE with Panda3D" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Panda3D.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.10.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>