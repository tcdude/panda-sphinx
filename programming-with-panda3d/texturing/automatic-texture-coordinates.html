

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Automatic Texture Coordinates &mdash; Panda3D Manual</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Panda3D Manual" href="../../index.html"/>
        <link rel="up" title="Texturing" href="index.html"/>
        <link rel="next" title="Projected Textures" href="projected-textures.html"/>
        <link rel="prev" title="Multiple Texture Coordinate Sets" href="multiple-texture-coordinate-sets.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Panda3D
          

          
          </a>

          
            
            
              <div class="version">
                1.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro/index.html">Introduction to Panda3D</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Programming with Panda3D</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../the-scene-graph/index.html">The Scene Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../the-configuration-file/index.html">The Configuration File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../models-and-actors/index.html">Models and Actors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../render-attributes/index.html">Render Attributes</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Texturing</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="simple-texturing.html">Simple Texturing</a></li>
<li class="toctree-l3"><a class="reference internal" href="choosing-a-texture-size.html">Choosing a Texture Size</a></li>
<li class="toctree-l3"><a class="reference internal" href="texture-wrap-modes.html">Texture Wrap Modes</a></li>
<li class="toctree-l3"><a class="reference internal" href="texture-filter-types.html">Texture Filter Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="simple-texture-replacement.html">Simple Texture Replacement</a></li>
<li class="toctree-l3"><a class="reference internal" href="multitexture-introduction.html">Multitexture Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="texture-modes.html">Texture Modes</a></li>
<li class="toctree-l3"><a class="reference internal" href="texture-order.html">Texture Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="texture-combine-modes.html">Texture Combine Modes</a></li>
<li class="toctree-l3"><a class="reference internal" href="texture-transforms.html">Texture Transforms</a></li>
<li class="toctree-l3"><a class="reference internal" href="multiple-texture-coordinate-sets.html">Multiple Texture Coordinate Sets</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Automatic Texture Coordinates</a></li>
<li class="toctree-l3"><a class="reference internal" href="projected-textures.html">Projected Textures</a></li>
<li class="toctree-l3"><a class="reference internal" href="simple-environment-mapping.html">Simple Environment Mapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="3d-textures.html">3-D Textures</a></li>
<li class="toctree-l3"><a class="reference internal" href="cube-maps.html">Cube Maps</a></li>
<li class="toctree-l3"><a class="reference internal" href="environment-mapping-with-cube-maps.html">Environment Mapping with Cube Maps</a></li>
<li class="toctree-l3"><a class="reference internal" href="automatic-texture-animation.html">Automatic Texture Animation</a></li>
<li class="toctree-l3"><a class="reference internal" href="playing-mpg-and-avi-files.html">Playing MPG and AVI files</a></li>
<li class="toctree-l3"><a class="reference internal" href="stereo-multiview-textures.html">Stereo/Multiview Textures</a></li>
<li class="toctree-l3"><a class="reference internal" href="transparency-and-blending.html">Transparency and Blending</a></li>
<li class="toctree-l3"><a class="reference internal" href="texture-management.html">Texture Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="texture-compression.html">Texture Compression</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../shaders/index.html">Shaders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../camera-control/index.html">Camera Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/index.html">Sound</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intervals/index.html">Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tasks-and-event-handling/index.html">Tasks and Event Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text-and-image-rendering/index.html">Text and Image Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../directgui/index.html">DirectGUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../render-effects/index.html">Render Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../finite-state-machines/index.html">Finite State Machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../terrain/index.html">Terrain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal-structures/index.html">Advanced operations with Panda3D&#8217;s internal structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../render-to-texture-and-image-postprocessing/index.html">Render-to-Texture and Image Postprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../panda3d-rendering-process/index.html">Panda3D Rendering Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../panda3d-utility-functions.html">Panda3D Utility Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../particle-effects/index.html">Particle Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../collision-detection/index.html">Collision Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../garbage-collection/index.html">Garbage Collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hardware-support/index.html">Hardware support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../math-engine/index.html">Math Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../physics/index.html">Physics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../motion-paths.html">Motion Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="../timing/index.html">Timing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multifiles/index.html">Multifiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../showbase.html">ShowBase</a></li>
<li class="toctree-l2"><a class="reference internal" href="../file-reading.html">File Reading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../threading.html">Threading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../subclassing.html">Subclassing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../table-of-features-supported-per-graphic-renderer.html">Table of features supported per graphic renderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pandai/index.html">Artificial Intelligence (PANDAI)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../distribution/index.html">Distributing Panda3D Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples/index.html">Sample Programs in the Distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../debugging/index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../performance-tuning/index.html">Performance Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using-c++/index.html">Using C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Panda3D Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../building-from-source.html">Building Panda3D from Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cheat-sheets.html">Cheat Sheets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started-on-osx.html">Getting Started on OSX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../more-panda3d-resources.html">More Panda3D Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../thirdparty-licenses.html">Third-party dependencies and license info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../the-irc-channel.html">The IRC Channel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Panda3D</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Programming with Panda3D</a> &raquo;</li>
      
          <li><a href="index.html">Texturing</a> &raquo;</li>
      
    <li>Automatic Texture Coordinates</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/programming-with-panda3d/texturing/automatic-texture-coordinates.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="automatic-texture-coordinates">
<span id="id1"></span><h1>Automatic Texture Coordinates<a class="headerlink" href="#automatic-texture-coordinates" title="Permalink to this headline">¶</a></h1>
<p>In addition to using texture coordinates that are built into the model, it is
also possible to generate texture coordinates at runtime. Usually you would
use this technique to achieve some particular effect, such as projective
texturing or environment mapping, but sometimes you may simply want to apply a
texture to a model that does not already have texture coordinates, and this is
the only way to do that.</p>
<p>The texture coordinates generated by this technique are generated on-the-fly,
and are not stored within the model. When you turn off the generation mode,
the texture coordinates cease to exist.</p>
<p>Use the following NodePath method to enable automatic generation of texture
coordinates:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">nodePath</span><span class="o">.</span><span class="n">setTexGen</span><span class="p">(</span><span class="n">TextureStage</span><span class="p">,</span> <span class="n">texGenMode</span><span class="p">)</span>
</pre></div>
</div>
<p>The texGenMode parameter specifies how the texture coordinates are to be
computed, and may be any of the following options. In the list below, &#8220;eye&#8221;
means the coordinate space of the observing camera, and &#8220;world&#8221; means world
coordinates, e.g. the coordinate space of render, the root of the scene graph.</p>
<p>Note that several of the above options generate 3-D texture coordinates: (u,
v, w) instead of just (u, v). The third coordinate may be important if you
have a 3-D texture or a cube map (described later), but if you just have an
ordinary 2-D texture the extra coordinate is ignored. (However, even with a
2-D texture, you might apply a 3-D transform to the texture coordinates, which
would bring the third coordinate back into the equation.)</p>
<p>Also, note that almost all of these options have a very narrow purpose; you
would generally use most of these only to perform the particular effect that
they were designed for. This manual will discuss these special-purpose TexGen
modes in later sections, as each effect is discussed; for now, you only need
to understand that they exist, and not worry about exactly what they do.</p>
<p>The mode that is most likely to have general utility is the first one:
<code class="docutils literal"><span class="pre">MWorldPosition</span></code>. This mode converts
each vertex&#8217;s (x, y, z) position into world space, and then copies those three
numeric values to the (u, v, w) texture coordinates. This means, for instance,
that if you apply a normal 2-D texture to the object, the object&#8217;s (x, y)
position will be used to look up colors in the texture.</p>
<p>For instance, the teapot.egg sample model that ships with Panda has no texture
coordinates built in the model, so you cannot normally apply a texture to it.
But you can enable automatic generation of texture coordinates and then apply
a texture:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">teapot</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">loadModel</span><span class="p">(</span><span class="s1">&#39;teapot.egg&#39;</span><span class="p">)</span>
<span class="n">tex</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">loadTexture</span><span class="p">(</span><span class="s1">&#39;maps/color-grid.rgb&#39;</span><span class="p">)</span>
<span class="n">teapot</span><span class="o">.</span><span class="n">setTexGen</span><span class="p">(</span><span class="n">TextureStage</span><span class="o">.</span><span class="n">getDefault</span><span class="p">(),</span> <span class="n">TexGenAttrib</span><span class="o">.</span><span class="n">MWorldPosition</span><span class="p">)</span>
<span class="n">teapot</span><span class="o">.</span><span class="n">setTexture</span><span class="p">(</span><span class="n">tex</span><span class="p">)</span>
</pre></div>
</div>
<p>And you end up with something like this:</p>
<p><img alt="Teapot with a grid applied" src="../../_images/tex-gen-teapot-xy.png" /></p>
<p>You can use this in conjunction with a texture transform to further manipulate
the texture coordinates. For instance, to rotate the texture 90 degrees, you
could do something like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">teapot</span><span class="o">.</span><span class="n">setTexTransform</span><span class="p">(</span><span class="n">TextureStage</span><span class="o">.</span><span class="n">getDefault</span><span class="p">(),</span> <span class="n">TransformState</span><span class="o">.</span><span class="n">makeHpr</span><span class="p">(</span><span class="n">VBase3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))</span>
</pre></div>
</div>
<p><img alt="Teapot with a grid applied, rotated" src="../../_images/tex-gen-teapot-xz.png" /></p>
<p>Finally, consider that the only two choices for the coordinate frame of the
texture coordinate generation are &#8220;world&#8221; and &#8220;eye&#8221;, for the root NodePath and
the camera NodePath, respectively. But what if you want to generate the
texture coordinates relative to some other node, say the teapot itself? The
above images are all well and good for a teapot that happens to be situated at
the origin, but suppose we want the teapot to remain the same when we move it
somewhere else in the world?</p>
<p>If you use only <code class="docutils literal"><span class="pre">MWorldPosition</span></code>, then
when you change the teapot&#8217;s position, for instance by parenting it to a
moving node, the teapot will seem to move while its texture pattern stays in
place&#8211;maybe not the effect you had in mind. What you probably intended was
for the teapot to take its texture pattern along with it as it moves around.
To do this, you will need to compute the texture coordinates in the space of
the teapot node, rather than in world space.</p>
<p>Panda3D provides the capability to generate texture coordinates in the
coordinate space of any arbitrary node you like. To do this, use
<code class="docutils literal"><span class="pre">MWorldPosition</span></code> in conjunction with
Panda&#8217;s &#8220;texture projector&#8221;, which applies the relative transform between any
two arbitrary NodePaths to the texture transform; you can use it to compute
the relative transform from world space to teapot space, like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">teapot</span><span class="o">.</span><span class="n">setTexGen</span><span class="p">(</span><span class="n">TextureStage</span><span class="o">.</span><span class="n">getDefault</span><span class="p">(),</span> <span class="n">TexGenAttrib</span><span class="o">.</span><span class="n">MWorldPosition</span><span class="p">)</span>
<span class="n">teapot</span><span class="o">.</span><span class="n">setTexProjector</span><span class="p">(</span><span class="n">TextureStage</span><span class="o">.</span><span class="n">getDefault</span><span class="p">(),</span> <span class="n">render</span><span class="p">,</span> <span class="n">teapot</span><span class="p">)</span>
</pre></div>
</div>
<p>It may seem a little circuitous to convert the teapot vertices to world space
to generate the texture coordinates, and then convert the texture coordinates
back to teapot space again&#8211;after all, didn&#8217;t they start out in teapot space?
It would have saved a lot of effort just to keep them there! Why doesn&#8217;t Panda
just provide an <code class="docutils literal"><span class="pre">MObjectPosition</span></code> mode
that would convert texture coordinates from the object&#8217;s native position?</p>
<p>That&#8217;s a fair question, and
<code class="docutils literal"><span class="pre">MObjectPosition</span></code> would be a fine idea
for a model as simple as the teapot, which is after all just one node. But for
more sophisticated models, which can contain multiple sub-nodes each with
their own coordinate space, the idea of
<code class="docutils literal"><span class="pre">MObjectPosition</span></code> is less useful, unless
you truly wanted each sub-node to be re-textured within its own coordinate
space. Rather than provide this feature of questionable value, Panda3D prefers
to give you the ability to specify the particular coordinate space you had in
mind, unambiguously.</p>
<p>Note that you only want to call
<code class="docutils literal"><span class="pre">setTexProjector()</span></code> when you are using mode
<code class="docutils literal"><span class="pre">MWorldPosition</span></code>. The other modes are
generally computed from vectors (for instance, normals), not positions, and it
usually doesn&#8217;t makes sense to apply a relative transform to a vector.</p>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="projected-textures.html" class="btn btn-neutral float-right" title="Projected Textures" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="multiple-texture-coordinate-sets.html" class="btn btn-neutral" title="Multiple Texture Coordinate Sets" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Panda3D.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.10.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>